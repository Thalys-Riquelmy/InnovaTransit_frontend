"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[607],{3607:(G,p,c)=>{c.r(p),c.d(p,{GerentePagesRoutingModule:()=>O});var h=c(5260),d=c(177),a=c(4438),m=c(4341),t=c(2841),f=c(671);function F(e,s){if(1&e&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s()()),2&e){const n=s.$implicit;a.R7$(2),a.JRh(n.veiculo),a.R7$(2),a.JRh(n.tarefa.evento),a.R7$(2),a.JRh(n.motorista),a.R7$(2),a.JRh(n.tarefa.horarioFim)}}function g(e,s){if(1&e&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",8)(3,"thead",9)(4,"tr")(5,"th"),a.EFF(6,"Ve\xedculo"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Rota"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Motorista"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o"),a.k0s()()(),a.j41(13,"tbody"),a.DNE(14,F,9,4,"tr",10),a.k0s()()()()),2&e){const n=a.XpG();a.R7$(14),a.Y8G("ngForOf",n.tarefasComHoraInicio)}}function _(e,s){if(1&e&&(a.j41(0,"span")(1,"span",11),a.EFF(2),a.k0s()()),2&e){const n=a.XpG().$implicit,o=a.XpG(2);a.R7$(),a.Y8G("ngClass",o.isAtrasado(n.tarefa.horarioFim)?"viagem-atrasada":"viagem-tempo"),a.R7$(),a.SpI(" ",o.isAtrasado(n.tarefa.horarioFim)?"Viagem Atrasada":"Viagem em Tempo"," ")}}function E(e,s){if(1&e&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s(),a.j41(9,"td"),a.EFF(10),a.nI1(11,"date"),a.DNE(12,_,3,2,"span",7),a.k0s()()),2&e){const n=s.$implicit,o=a.XpG(2);a.R7$(2),a.JRh(n.tarefa.evento),a.R7$(2),a.JRh(n.motorista),a.R7$(2),a.JRh(n.tarefa.horaInicio),a.R7$(2),a.JRh(n.tarefa.horarioFim),a.R7$(2),a.SpI(" ",a.i5U(11,6,o.currentHour,"HH:mm:ss")," "),a.R7$(2),a.Y8G("ngIf",n.tarefa.horarioFim)}}function v(e,s){if(1&e&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",8)(3,"thead",9)(4,"tr")(5,"th"),a.EFF(6,"Rota"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Motorista"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o Chegada"),a.k0s(),a.j41(13,"th"),a.EFF(14,"Chegada"),a.k0s()()(),a.j41(15,"tbody"),a.DNE(16,E,13,9,"tr",10),a.k0s()()()()),2&e){const n=a.XpG();a.R7$(16),a.Y8G("ngForOf",n.tarefasComHoraInicio)}}function k(e,s){if(1&e&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s()()),2&e){const n=s.$implicit;a.R7$(2),a.JRh(n.tarefa.evento),a.R7$(2),a.JRh(n.motorista),a.R7$(2),a.JRh(n.tarefa.horarioInicio),a.R7$(2),a.JRh(n.tarefa.horarioFim)}}function C(e,s){if(1&e&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",8)(3,"thead",9)(4,"tr")(5,"th"),a.EFF(6,"Rota"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Motorista"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Previs\xe3o Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o Chegada"),a.k0s()()(),a.j41(13,"tbody"),a.DNE(14,k,9,4,"tr",10),a.k0s()()()()),2&e){const n=a.XpG();a.R7$(14),a.Y8G("ngForOf",n.tarefasIniciar)}}function j(e,s){if(1&e&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s(),a.j41(9,"td"),a.EFF(10),a.k0s(),a.j41(11,"td"),a.EFF(12),a.k0s()()),2&e){const n=s.$implicit;a.R7$(2),a.JRh(n.motorista),a.R7$(2),a.JRh(n.tarefa.evento),a.R7$(2),a.JRh(n.tarefa.horaInicio),a.R7$(2),a.JRh(n.tarefa.horaFim),a.R7$(2),a.JRh(!0===n.tarefa.cancelado?"Sim":"N\xe3o"),a.R7$(2),a.JRh(n.tarefa.motivoCancelamento)}}function R(e,s){if(1&e&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",8)(3,"thead",9)(4,"tr")(5,"th"),a.EFF(6,"Motorista"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Evento"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Chegada"),a.k0s(),a.j41(13,"th"),a.EFF(14,"Cancelado"),a.k0s(),a.j41(15,"th"),a.EFF(16,"Motivo Cancelamento"),a.k0s()()(),a.j41(17,"tbody"),a.DNE(18,j,13,6,"tr",10),a.k0s()()()()),2&e){const n=a.XpG();a.R7$(18),a.Y8G("ngForOf",n.tarefasFinalizadas)}}function b(e,s){1&e&&a.nrm(0,"ion-datetime",20)}function P(e,s){1&e&&(a.j41(0,"ion-row")(1,"ion-col",16)(2,"ion-label",17),a.EFF(3,"Selecione a data e hora"),a.k0s(),a.nrm(4,"ion-datetime-button",18),a.j41(5,"ion-modal",19),a.DNE(6,b,1,0,"ng-template"),a.k0s()()()),2&e&&(a.R7$(5),a.Y8G("keepContentsMounted",!0))}function I(e,s){if(1&e){const n=a.RV6();a.j41(0,"ion-row")(1,"ion-col",16)(2,"ion-item")(3,"ion-label"),a.EFF(4,"Hora di\xe1ria"),a.k0s(),a.j41(5,"ion-datetime",21),a.mxI("ngModelChange",function(i){a.eBV(n);const r=a.XpG();return a.DH7(r.horaDiaria,i)||(r.horaDiaria=i),a.Njj(i)}),a.k0s()()()()}if(2&e){const n=a.XpG();a.R7$(5),a.R50("ngModel",n.horaDiaria)}}function T(e,s){if(1&e){const n=a.RV6();a.j41(0,"ion-row")(1,"ion-col",16)(2,"ion-item")(3,"ion-label"),a.EFF(4,"Dia da Semana"),a.k0s(),a.j41(5,"ion-select",22),a.mxI("ngModelChange",function(i){a.eBV(n);const r=a.XpG();return a.DH7(r.diaSemana,i)||(r.diaSemana=i),a.Njj(i)}),a.j41(6,"ion-select-option",23),a.EFF(7,"Segunda-feira"),a.k0s(),a.j41(8,"ion-select-option",24),a.EFF(9,"Ter\xe7a-feira"),a.k0s(),a.j41(10,"ion-select-option",25),a.EFF(11,"Quarta-feira"),a.k0s(),a.j41(12,"ion-select-option",26),a.EFF(13,"Quinta-feira"),a.k0s(),a.j41(14,"ion-select-option",27),a.EFF(15,"Sexta-feira"),a.k0s(),a.j41(16,"ion-select-option",28),a.EFF(17,"S\xe1bado"),a.k0s(),a.j41(18,"ion-select-option",29),a.EFF(19,"Domingo"),a.k0s()()(),a.j41(20,"ion-item"),a.nrm(21,"ion-input",30),a.k0s()()()}if(2&e){const n=a.XpG();a.R7$(5),a.R50("ngModel",n.diaSemana)}}function x(e,s){if(1&e){const n=a.RV6();a.j41(0,"ion-row")(1,"ion-col",31)(2,"ion-label",32),a.EFF(3,"Dia do M\xeas"),a.k0s(),a.j41(4,"ion-item")(5,"ion-input",33),a.mxI("ngModelChange",function(i){a.eBV(n);const r=a.XpG();return a.DH7(r.diaMes,i)||(r.diaMes=i),a.Njj(i)}),a.k0s()()(),a.j41(6,"ion-col",16)(7,"ion-item"),a.nrm(8,"ion-input",30),a.k0s()()()}if(2&e){const n=a.XpG();a.R7$(5),a.R50("ngModel",n.diaMes)}}const y=[{path:"",redirectTo:"painel-operacao",pathMatch:"full"},{path:"painel-operacao",component:(()=>{var e;class s{constructor(){this.fb=(0,a.WQX)(m.ok),this.folhaServicoService=(0,a.WQX)(f.j),this.folhaServico=null,this.listaFolhaServico=[],this.listaFiltrada=[],this.tarefasComHoraInicio=[],this.tarefasIniciar=[],this.tarefasFinalizadas=[],this.currentHour=new Date,this.segment="overview",this.selectedSegment="veiculos-operando"}segmentChanged(o){this.selectedSegment=o.detail.value}ngOnInit(){const i=(0,d.Yq)(new Date,"yyyy-MM-dd","en-US");this.folhaServicoService.listarFolhaServicoPorData(i).subscribe(r=>{this.listaFolhaServico=r,this.listarTarefasComHoraInicio(),this.listarTarefasIniciar(),this.listarTarefasFinalizadas()}),this.intervalId=setInterval(()=>{this.currentHour=new Date},1e3)}listarTarefasComHoraInicio(){this.tarefasComHoraInicio=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(r=>null!=r.horaInicio&&null==r.horaFim).forEach(r=>{var l;this.tarefasComHoraInicio.push({tarefa:r,motorista:o.motorista.nome,veiculo:null===(l=o.veiculo)||void 0===l?void 0:l.numeroVeiculo})})}),console.log("Tarefas com horaInicio preenchida:",this.tarefasComHoraInicio)}listarTarefasIniciar(){this.tarefasIniciar=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(r=>null==r.horaInicio&&null==r.horaFim).forEach(r=>{var l;this.tarefasIniciar.push({tarefa:r,motorista:o.motorista.nome,numeroVeiculo:null===(l=o.veiculo)||void 0===l?void 0:l.numeroVeiculo})})}),console.log("Tarefas a serem iniciadas:",this.tarefasIniciar)}listarTarefasFinalizadas(){this.tarefasFinalizadas=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(r=>null!=r.horaInicio&&null!=r.horaFim).forEach(r=>{var l,u;this.tarefasFinalizadas.push({tarefa:r,motorista:o.motorista.nome,motivo:null===(l=o.tarefa)||void 0===l?void 0:l.motivoCancelamento,cancelado:null===(u=o.tarefa)||void 0===u?void 0:u.cancelado,numeroVeiculo:o.veiculo.numeroVeiculo})})}),console.log("Tarefas Finalizadas",this.tarefasFinalizadas)}ngOnDestroy(){clearInterval(this.intervalId)}isAtrasado(o){if(!o)return!1;const[i,r]=o.split(":").map(Number),l=new Date;return 60*l.getHours()+l.getMinutes()>60*i+r}}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=a.VBU({type:e,selectors:[["app-painel-operacao"]],standalone:!0,features:[a.aNF],decls:29,vars:4,consts:[["id","main-content",1,"ion-page"],["slot","start"],["value","veiculos-operando",3,"ionChange"],["value","veiculos-operando"],["value","viagens-execucao"],["value","viagens-realizar"],["value","viagens-canceladas"],[4,"ngIf"],[1,"table","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,i){1&o&&(a.j41(0,"div",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",1),a.nrm(4,"ion-menu-button"),a.k0s(),a.j41(5,"ion-title"),a.EFF(6,"InnovaTransit"),a.k0s()()(),a.j41(7,"ion-header")(8,"ion-toolbar")(9,"ion-title"),a.EFF(10,"Monitoramento Opera\xe7\xf5es"),a.k0s()()(),a.j41(11,"ion-content")(12,"ion-segment",2),a.bIt("ionChange",function(l){return i.segmentChanged(l)}),a.j41(13,"ion-segment-button",3)(14,"ion-label"),a.EFF(15,"Ve\xedculos Operando"),a.k0s()(),a.j41(16,"ion-segment-button",4)(17,"ion-label"),a.EFF(18,"Viagens em Execu\xe7\xe3o"),a.k0s()(),a.j41(19,"ion-segment-button",5)(20,"ion-label"),a.EFF(21,"Viagens a Serem Realizadas"),a.k0s()(),a.j41(22,"ion-segment-button",6)(23,"ion-label"),a.EFF(24,"Viagens Finalizadas"),a.k0s()()(),a.DNE(25,g,15,1,"ion-card",7)(26,v,17,1,"ion-card",7)(27,C,15,1,"ion-card",7)(28,R,19,1,"ion-card",7),a.k0s()()),2&o&&(a.R7$(25),a.Y8G("ngIf","veiculos-operando"===i.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-execucao"===i.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-realizar"===i.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-canceladas"===i.selectedSegment))},dependencies:[t.QW,t.I9,t.MC,t.he,t.eP,t.Gp,t.b_,t.W9,t.ai,d.MD,d.YU,d.Sq,d.bT,d.vh,t.BC,t.eU],styles:["ion-toolbar[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#333;color:#fff}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.viagem-tempo[_ngcontent-%COMP%]{color:green;font-weight:700}.viagem-atrasada[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),s})()},{path:"painel-api-externa",component:(()=>{var e;class s{constructor(){this.frequencia="",this.dataHoraUnica="",this.horaDiaria="",this.diaSemana="",this.horaSemanal="",this.diaMes=0,this.horaMensal=""}agendarTarefa(){let o;switch(this.frequencia){case"once":o={frequency:"ONCE",dateTime:this.dataHoraUnica};break;case"daily":o={frequency:"DAILY",dateTime:`1970-01-01T${this.horaDiaria}:00`};break;case"weekly":o={frequency:"WEEKLY",dateTime:`1970-01-01T${this.horaSemanal}:00`,dayOfWeek:this.diaSemana};break;case"monthly":o={frequency:"MONTHLY",dateTime:`1970-01-01T${this.horaMensal}:00`,dayOfMonth:this.diaMes}}console.log("Payload para enviar:",o)}}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275cmp=a.VBU({type:e,selectors:[["app-painel-api-externa"]],standalone:!0,features:[a.aNF],decls:47,vars:5,consts:[["id","main-content",1,"ion-page"],["slot","start"],[1,"ion-padding"],["size","6","size-sm","3"],["label","Empresa","labelPlacement","floating","value","Metrobus Transporte Coletivo S/A"],["label","CNPJ","labelPlacement","floating","value","02.392.459/0001-03"],["size","3"],[3,"ngModelChange","ngModel"],["slot","start","value","once"],["slot","start","value","daily"],["slot","start","value","weekly"],["slot","start","value","monthly"],[4,"ngIf"],["size","12",2,"text-align","center","margin-top","20px"],["color","primary"],["color","secondary"],["size","12"],[2,"margin-left","60px"],["datetime","datetimeOnce"],[3,"keepContentsMounted"],["id","datetimeOnce"],["displayFormat","HH:mm","presentation","time",3,"ngModelChange","ngModel"],["placeholder","Selecione o dia",3,"ngModelChange","ngModel"],["value","monday"],["value","tuesday"],["value","wednesday"],["value","thursday"],["value","friday"],["value","saturday"],["value","sunday"],["label","Hor\xe1rio para busca de folha de servi\xe7o","type","time","labelPlacement","floating"],["size","12",2,"margin-top","10px"],[2,"margin-left","15px"],["type","number","min","1","max","31","placeholder","Escolha o dia",3,"ngModelChange","ngModel"]],template:function(o,i){1&o&&(a.j41(0,"div",0)(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",1),a.nrm(4,"ion-menu-button"),a.k0s(),a.j41(5,"ion-title"),a.EFF(6,"Innova Transit"),a.k0s()()(),a.j41(7,"ion-content",2)(8,"ion-grid")(9,"ion-row")(10,"ion-col",3)(11,"ion-item"),a.nrm(12,"ion-input",4),a.k0s()(),a.j41(13,"ion-col",3)(14,"ion-item"),a.nrm(15,"ion-input",5),a.k0s()()(),a.j41(16,"ion-row")(17,"ion-col",6)(18,"ion-list")(19,"ion-radio-group",7),a.mxI("ngModelChange",function(l){return a.DH7(i.frequencia,l)||(i.frequencia=l),l}),a.j41(20,"ion-item")(21,"ion-label"),a.EFF(22,"Uma vez"),a.k0s(),a.nrm(23,"ion-radio",8),a.k0s(),a.j41(24,"ion-item")(25,"ion-label"),a.EFF(26,"Diariamente"),a.k0s(),a.nrm(27,"ion-radio",9),a.k0s(),a.j41(28,"ion-item")(29,"ion-label"),a.EFF(30,"Semanalmente"),a.k0s(),a.nrm(31,"ion-radio",10),a.k0s(),a.j41(32,"ion-item")(33,"ion-label"),a.EFF(34,"Mensalmente"),a.k0s(),a.nrm(35,"ion-radio",11),a.k0s()()()(),a.j41(36,"ion-col",6),a.DNE(37,P,7,1,"ion-row",12)(38,I,6,1,"ion-row",12)(39,T,22,1,"ion-row",12)(40,x,9,1,"ion-row",12),a.k0s()(),a.j41(41,"ion-row")(42,"ion-col",13)(43,"ion-button",14),a.EFF(44,"Salvar"),a.k0s(),a.j41(45,"ion-button",15),a.EFF(46,"Cancelar"),a.k0s()()()()()()),2&o&&(a.R7$(19),a.R50("ngModel",i.frequencia),a.R7$(18),a.Y8G("ngIf","once"===i.frequencia),a.R7$(),a.Y8G("ngIf","daily"===i.frequencia),a.R7$(),a.Y8G("ngIf","weekly"===i.frequencia),a.R7$(),a.Y8G("ngIf","monthly"===i.frequencia))},dependencies:[t.he,t.K4,t.A9,t.Sb,t.nf,t.KO,t.f0,t.ln,t.lO,t.BC,t.W9,t.Jm,t.$w,t.uz,t.hU,t.eU,t.ai,t.QW,t.MC,d.MD,d.bT,t.Nm,t.Ip,m.YN,m.BC,m.vS,m.X1]}),s})()}];let O=(()=>{var e;class s{}return(e=s).\u0275fac=function(o){return new(o||e)},e.\u0275mod=a.$C({type:e}),e.\u0275inj=a.G2t({imports:[h.iI.forChild(y),h.iI]}),s})()}}]);