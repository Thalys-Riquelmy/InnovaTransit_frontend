"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[680],{9680:(b,F,l)=>{l.r(F),l.d(F,{GerentePagesRoutingModule:()=>I});var m=l(5260),d=l(177),a=l(4438),f=l(4341),c=l(8682),u=l(671);function p(t,i){if(1&t&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s()()),2&t){const e=i.$implicit;a.R7$(2),a.JRh(e.veiculo),a.R7$(2),a.JRh(e.tarefa.evento),a.R7$(2),a.JRh(e.motorista),a.R7$(2),a.JRh(e.tarefa.horarioFim)}}function g(t,i){if(1&t&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",6)(3,"thead",7)(4,"tr")(5,"th"),a.EFF(6,"Ve\xedculo"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Rota"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Motorista"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o"),a.k0s()()(),a.j41(13,"tbody"),a.DNE(14,p,9,4,"tr",8),a.k0s()()()()),2&t){const e=a.XpG();a.R7$(14),a.Y8G("ngForOf",e.tarefasComHoraInicio)}}function v(t,i){if(1&t&&(a.j41(0,"span")(1,"span",9),a.EFF(2),a.k0s()()),2&t){const e=a.XpG().$implicit,o=a.XpG(2);a.R7$(),a.Y8G("ngClass",o.isAtrasado(e.tarefa.horarioFim)?"viagem-atrasada":"viagem-tempo"),a.R7$(),a.SpI(" ",o.isAtrasado(e.tarefa.horarioFim)?"Viagem Atrasada":"Viagem em Tempo"," ")}}function E(t,i){if(1&t&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s(),a.j41(9,"td"),a.EFF(10),a.nI1(11,"date"),a.DNE(12,v,3,2,"span",5),a.k0s()()),2&t){const e=i.$implicit,o=a.XpG(2);a.R7$(2),a.JRh(e.tarefa.evento),a.R7$(2),a.JRh(e.motorista),a.R7$(2),a.JRh(e.tarefa.horaInicio),a.R7$(2),a.JRh(e.tarefa.horarioFim),a.R7$(2),a.SpI(" ",a.i5U(11,6,o.currentHour,"HH:mm:ss")," "),a.R7$(2),a.Y8G("ngIf",e.tarefa.horarioFim)}}function C(t,i){if(1&t&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",6)(3,"thead",7)(4,"tr")(5,"th"),a.EFF(6,"Rota"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Motorista"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o Chegada"),a.k0s(),a.j41(13,"th"),a.EFF(14,"Chegada"),a.k0s()()(),a.j41(15,"tbody"),a.DNE(16,E,13,9,"tr",8),a.k0s()()()()),2&t){const e=a.XpG();a.R7$(16),a.Y8G("ngForOf",e.tarefasComHoraInicio)}}function R(t,i){if(1&t&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s()()),2&t){const e=i.$implicit;a.R7$(2),a.JRh(e.tarefa.evento),a.R7$(2),a.JRh(e.motorista),a.R7$(2),a.JRh(e.tarefa.horarioInicio),a.R7$(2),a.JRh(e.tarefa.horarioFim)}}function _(t,i){if(1&t&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",6)(3,"thead",7)(4,"tr")(5,"th"),a.EFF(6,"Rota"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Motorista"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Previs\xe3o Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Previs\xe3o Chegada"),a.k0s()()(),a.j41(13,"tbody"),a.DNE(14,R,9,4,"tr",8),a.k0s()()()()),2&t){const e=a.XpG();a.R7$(14),a.Y8G("ngForOf",e.tarefasIniciar)}}function j(t,i){if(1&t&&(a.j41(0,"tr")(1,"td"),a.EFF(2),a.k0s(),a.j41(3,"td"),a.EFF(4),a.k0s(),a.j41(5,"td"),a.EFF(6),a.k0s(),a.j41(7,"td"),a.EFF(8),a.k0s(),a.j41(9,"td"),a.EFF(10),a.k0s(),a.j41(11,"td"),a.EFF(12),a.k0s()()),2&t){const e=i.$implicit;a.R7$(2),a.JRh(e.motorista),a.R7$(2),a.JRh(e.tarefa.evento),a.R7$(2),a.JRh(e.tarefa.horaInicio),a.R7$(2),a.JRh(e.tarefa.horaFim),a.R7$(2),a.JRh(!0===e.tarefa.cancelado?"Sim":"N\xe3o"),a.R7$(2),a.JRh(e.tarefa.motivoCancelamento)}}function k(t,i){if(1&t&&(a.j41(0,"ion-card")(1,"ion-card-content")(2,"table",6)(3,"thead",7)(4,"tr")(5,"th"),a.EFF(6,"Motorista"),a.k0s(),a.j41(7,"th"),a.EFF(8,"Evento"),a.k0s(),a.j41(9,"th"),a.EFF(10,"Partida"),a.k0s(),a.j41(11,"th"),a.EFF(12,"Chegada"),a.k0s(),a.j41(13,"th"),a.EFF(14,"Cancelado"),a.k0s(),a.j41(15,"th"),a.EFF(16,"Motivo Cancelamento"),a.k0s()()(),a.j41(17,"tbody"),a.DNE(18,j,13,6,"tr",8),a.k0s()()()()),2&t){const e=a.XpG();a.R7$(18),a.Y8G("ngForOf",e.tarefasFinalizadas)}}const P=[{path:"",redirectTo:"painel-operacao",pathMatch:"full"},{path:"painel-operacao",component:(()=>{var t;class i{constructor(){this.fb=(0,a.WQX)(f.ok),this.folhaServicoService=(0,a.WQX)(u.j),this.folhaServico=null,this.listaFolhaServico=[],this.listaFiltrada=[],this.tarefasComHoraInicio=[],this.tarefasIniciar=[],this.tarefasFinalizadas=[],this.currentHour=new Date,this.segment="overview",this.selectedSegment="veiculos-operando"}segmentChanged(o){this.selectedSegment=o.detail.value}ngOnInit(){const s=(0,d.Yq)(new Date,"yyyy-MM-dd","en-US");this.folhaServicoService.listarFolhaServicoPorData(s).subscribe(n=>{this.listaFolhaServico=n,this.listarTarefasComHoraInicio(),this.listarTarefasIniciar(),this.listarTarefasFinalizadas()}),this.intervalId=setInterval(()=>{this.currentHour=new Date},1e3)}listarTarefasComHoraInicio(){this.tarefasComHoraInicio=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(n=>null!=n.horaInicio&&null==n.horaFim).forEach(n=>{var r;this.tarefasComHoraInicio.push({tarefa:n,motorista:o.motorista.nome,veiculo:null===(r=o.veiculo)||void 0===r?void 0:r.numeroVeiculo})})}),console.log("Tarefas com horaInicio preenchida:",this.tarefasComHoraInicio)}listarTarefasIniciar(){this.tarefasIniciar=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(n=>null==n.horaInicio&&null==n.horaFim).forEach(n=>{var r;this.tarefasIniciar.push({tarefa:n,motorista:o.motorista.nome,numeroVeiculo:null===(r=o.veiculo)||void 0===r?void 0:r.numeroVeiculo})})}),console.log("Tarefas a serem iniciadas:",this.tarefasIniciar)}listarTarefasFinalizadas(){this.tarefasFinalizadas=[],this.listaFolhaServico.forEach(o=>{o.tarefas.filter(n=>null!=n.horaInicio&&null!=n.horaFim).forEach(n=>{var r,h;this.tarefasFinalizadas.push({tarefa:n,motorista:o.motorista.nome,motivo:null===(r=o.tarefa)||void 0===r?void 0:r.motivoCancelamento,cancelado:null===(h=o.tarefa)||void 0===h?void 0:h.cancelado,numeroVeiculo:o.veiculo.numeroVeiculo})})}),console.log("Tarefas Finalizadas",this.tarefasFinalizadas)}ngOnDestroy(){clearInterval(this.intervalId)}isAtrasado(o){if(!o)return!1;const[s,n]=o.split(":").map(Number),r=new Date;return 60*r.getHours()+r.getMinutes()>60*s+n}}return(t=i).\u0275fac=function(o){return new(o||t)},t.\u0275cmp=a.VBU({type:t,selectors:[["app-painel-operacao"]],standalone:!0,features:[a.aNF],decls:22,vars:4,consts:[["value","veiculos-operando",3,"ionChange"],["value","veiculos-operando"],["value","viagens-execucao"],["value","viagens-realizar"],["value","viagens-canceladas"],[4,"ngIf"],[1,"table","table-striped"],[1,"table-dark"],[4,"ngFor","ngForOf"],[3,"ngClass"]],template:function(o,s){1&o&&(a.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a.EFF(3,"Monitoramento Opera\xe7\xf5es"),a.k0s()()(),a.j41(4,"ion-content")(5,"ion-segment",0),a.bIt("ionChange",function(r){return s.segmentChanged(r)}),a.j41(6,"ion-segment-button",1)(7,"ion-label"),a.EFF(8,"Ve\xedculos Operando"),a.k0s()(),a.j41(9,"ion-segment-button",2)(10,"ion-label"),a.EFF(11,"Viagens em Execu\xe7\xe3o"),a.k0s()(),a.j41(12,"ion-segment-button",3)(13,"ion-label"),a.EFF(14,"Viagens a Serem Realizadas"),a.k0s()(),a.j41(15,"ion-segment-button",4)(16,"ion-label"),a.EFF(17,"Viagens Finalizadas"),a.k0s()()(),a.DNE(18,g,15,1,"ion-card",5)(19,C,17,1,"ion-card",5)(20,_,15,1,"ion-card",5)(21,k,19,1,"ion-card",5),a.k0s()),2&o&&(a.R7$(18),a.Y8G("ngIf","veiculos-operando"===s.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-execucao"===s.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-realizar"===s.selectedSegment),a.R7$(),a.Y8G("ngIf","viagens-canceladas"===s.selectedSegment))},dependencies:[c.I9,c.he,c.eP,c.Gp,c.b_,c.W9,c.ai,d.MD,d.YU,d.Sq,d.bT,d.vh,c.BC,c.eU],styles:["ion-toolbar[_ngcontent-%COMP%]{text-align:center}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px;text-align:left;border-bottom:1px solid #ddd}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#333;color:#fff}.table-striped[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:nth-child(odd){background-color:#f2f2f2}.viagem-tempo[_ngcontent-%COMP%]{color:green;font-weight:700}.viagem-atrasada[_ngcontent-%COMP%]{color:red;font-weight:700}"]}),i})()}];let I=(()=>{var t;class i{}return(t=i).\u0275fac=function(o){return new(o||t)},t.\u0275mod=a.$C({type:t}),t.\u0275inj=a.G2t({imports:[m.iI.forChild(P),m.iI]}),i})()}}]);